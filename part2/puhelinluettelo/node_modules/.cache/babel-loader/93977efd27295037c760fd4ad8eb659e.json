{"ast":null,"code":"import _objectSpread from\"C:\\\\MyTemp\\\\vjtuomin\\\\fsopen\\\\part2\\\\puhelinluettelo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\MyTemp\\\\vjtuomin\\\\fsopen\\\\part2\\\\puhelinluettelo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import AllNames from'./components/AllNames';import Filter from'./components/Filter';import NewPerson from'./components/NewPerson';import personService from'./services/personService';import Notification from'./components/Notification';import Error from'./components/Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),notif=_useState8[0],setNotif=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];useEffect(function(){console.log('effect');personService.getAll().then(function(persons){console.log(persons);setPersons(persons);});},[]);var handleNameChange=function handleNameChange(event){console.log(event.target.value);setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){console.log(event.target.value);setNewNumber(event.target.value);};var addName=function addName(event){event.preventDefault();var name={name:newName,number:newNumber};for(var i=0;i<persons.length;i++){if(persons[i].name===newName){var _ret=function(){var personOld=persons[i];var newPerson=_objectSpread(_objectSpread({},personOld),{},{number:newNumber});console.log(personOld);if(window.confirm(\"\".concat(newName,\" already added. Replace the old number with a new one?\"))){personService.updatePerson(personOld.id,newPerson).then(function(response){console.log(response);setPersons(persons.map(function(person){return person.id!==personOld.id?person:response;}));}).catch(function(error){setError(\"Information of \".concat(newName,\" already deleted, refresh the page\"));setTimeout(function(){setError(null);},5000);});}return{v:void 0};}();if(typeof _ret===\"object\")return _ret.v;}if(persons[i].number===newNumber){alert(\"\".concat(newNumber,\" already added to the phonebook\"));return;}}console.log('button clicked',event.target);personService.create(name).then(function(returnedName){setPersons(persons.concat(returnedName));setNewName('');setNewNumber('');setNotif(\"\".concat(returnedName.name,\" added succesfully\"));setTimeout(function(){setNotif(null);},5000);}).catch(function(error){setError(error.response.data);});};var handleSearch=function handleSearch(event){personService.getAll().then(function(persons){setPersons(persons.filter(function(person){return person.name.includes(event.target.value)||person.number.includes(event.target.value);}));});};var deletePerson=function deletePerson(person){if(window.confirm(\"Delete \".concat(person.name,\" ?\"))){personService.deletePerson(person.id).then(setPersons(persons.filter(function(p){return p.id!==person.id;})));setNotif(\"\".concat(person.name,\" deleted succesfully\"));setTimeout(function(){setNotif(null);},5000);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notif}),/*#__PURE__*/_jsx(Error,{message:error}),/*#__PURE__*/_jsx(Filter,{handleSearch:handleSearch}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add person\"}),/*#__PURE__*/_jsx(NewPerson,{newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange,addName:addName}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(AllNames,{persons:persons,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"sources":["C:/MyTemp/vjtuomin/fsopen/part2/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","AllNames","Filter","NewPerson","personService","Notification","Error","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","notif","setNotif","error","setError","console","log","getAll","then","handleNameChange","event","target","value","handleNumberChange","addName","preventDefault","name","number","i","length","personOld","newPerson","window","confirm","updatePerson","id","response","map","person","catch","setTimeout","alert","create","returnedName","concat","data","handleSearch","filter","includes","deletePerson","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport AllNames from './components/AllNames'\nimport Filter from './components/Filter'\nimport NewPerson from './components/NewPerson'\nimport personService from './services/personService'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [notif, setNotif] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n    .getAll()\n    .then(persons => {\n      console.log(persons)\n      setPersons(persons);\n    })\n   \n  }, [])\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const addName = (event) => {\n    event.preventDefault()\n    const name = {\n      name: newName,\n      number: newNumber,\n    }\n  for(let i=0;i<persons.length;i++){\n    if(persons[i].name === newName){\n      const personOld = persons[i];\n      const newPerson = {...personOld, number : newNumber}\n      console.log(personOld)\n      if(window.confirm(`${newName} already added. Replace the old number with a new one?`)){\n        personService\n        .updatePerson(personOld.id, newPerson)\n        .then(response => {\n          console.log(response)\n          setPersons(persons.map(person => person.id !== personOld.id ? person : response ))\n        })\n        .catch(error => {\n          setError(`Information of ${newName} already deleted, refresh the page`)\n          setTimeout(() => {\n            setError(null)\n          }, 5000)\n        })\n      }\n      return;\n    }\n     if(persons[i].number === newNumber){\n      alert(`${newNumber} already added to the phonebook`);\n      return;\n    }\n\n  }\n\n    console.log('button clicked', event.target)\n    \n    personService\n    .create(name)\n      .then(returnedName => {\n      setPersons(persons.concat(returnedName))\n      setNewName('')\n      setNewNumber('')\n      setNotif(`${returnedName.name} added succesfully`);\n      setTimeout(() => {\n        setNotif(null)\n      }, 5000)\n    })\n    .catch(error => {\n      setError(error.response.data)\n    })\n  \n  }\n  const handleSearch = (event) => {\n     personService\n     .getAll()\n     .then(persons => {\n     setPersons( persons.filter(function(person) {\n        return person.name.includes(event.target.value) ||\n               person.number.includes(event.target.value);\n     }))\n    })\n    \n   \n  }\n  const deletePerson = person => {\n    if(window.confirm(`Delete ${person.name} ?`)){\n    personService\n    .deletePerson(person.id)\n     .then(\n       setPersons(persons.filter(p => p.id !== person.id))\n       \n     )\n     setNotif(`${person.name} deleted succesfully`);\n     setTimeout(() => {\n      setNotif(null)\n    }, 5000)\n    }\n  }\n\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notif}/>\n      <Error message={error} />\n      <Filter handleSearch={handleSearch}/>\n      <h2>Add person</h2>\n      <NewPerson newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addName={addName} />\n      <h2>Numbers</h2>\n      <AllNames persons={persons} deletePerson={deletePerson}/>\n    </div>\n  )\n\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}