{"ast":null,"code":"var _jsxFileName = \"C:\\\\MyTemp\\\\vjtuomin\\\\fsopen\\\\part2\\\\puhelinluettelo\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport AllNames from './components/AllNames';\nimport Filter from './components/Filter';\nimport NewPerson from './components/NewPerson';\nimport personService from './services/personService';\nimport Notification from './components/Notification';\nimport Error from './components/Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [notif, setNotif] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    console.log('effect');\n    personService.getAll().then(persons => {\n      setPersons(persons);\n    });\n  }, []);\n\n  const handleNameChange = event => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const addName = event => {\n    event.preventDefault();\n    const name = {\n      name: newName,\n      number: newNumber\n    };\n\n    for (let i = 0; i < persons.length; i++) {\n      if (persons[i].name === newName) {\n        const personOld = persons[i];\n        const newPerson = { ...personOld,\n          number: newNumber\n        };\n        console.log(personOld);\n\n        if (window.confirm(`${newName} already added. Replace the old number with a new one?`)) {\n          personService.updatePerson(personOld.id, newPerson).then(response => {\n            console.log(response);\n            setPersons(persons.map(person => person.id !== personOld.id ? person : response));\n          }).catch(error => {\n            setError();\n          });\n        }\n\n        return;\n      }\n\n      if (persons[i].number === newNumber) {\n        alert(`${newNumber} already added to the phonebook`);\n        return;\n      }\n    }\n\n    console.log('button clicked', event.target);\n    personService.create(name).then(returnedName => {\n      setPersons(persons.concat(returnedName));\n      setNewName('');\n      setNewNumber('');\n      setNotif(`${returnedName.name} added succesfully`);\n      setTimeout(() => {\n        setNotif(null);\n      }, 5000);\n    });\n  };\n\n  const handleSearch = event => {\n    personService.getAll().then(persons => {\n      setPersons(persons.filter(function (person) {\n        return person.name.includes(event.target.value) || person.number.includes(event.target.value);\n      }));\n    });\n  };\n\n  const deletePerson = person => {\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService.deletePerson(person.id).then(setPersons(persons.filter(p => p.id !== person.id)));\n      setNotif(`${person.name} deleted succesfully`);\n      setTimeout(() => {\n        setNotif(null);\n      }, 5000);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: notif\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Error, {\n      message: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      handleSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add person\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewPerson, {\n      newName: newName,\n      newNumber: newNumber,\n      handleNameChange: handleNameChange,\n      handleNumberChange: handleNumberChange,\n      addName: addName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AllNames, {\n      persons: persons,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"Qs2t9sRabS+GfYtkYRRwKHqcoU0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/MyTemp/vjtuomin/fsopen/part2/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","AllNames","Filter","NewPerson","personService","Notification","Error","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","notif","setNotif","error","setError","console","log","getAll","then","handleNameChange","event","target","value","handleNumberChange","addName","preventDefault","name","number","i","length","personOld","newPerson","window","confirm","updatePerson","id","response","map","person","catch","alert","create","returnedName","concat","setTimeout","handleSearch","filter","includes","deletePerson","p"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AAChB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACe,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACiB,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,IAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAf,IAAAA,aAAa,CACZgB,MADD,GAECC,IAFD,CAEMb,OAAO,IAAI;AACfC,MAAAA,UAAU,CAACD,OAAD,CAAV;AACD,KAJD;AAMD,GARQ,EAQN,EARM,CAAT;;AAUA,QAAMc,gBAAgB,GAAIC,KAAD,IAAW;AAClCL,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAK,CAACC,MAAN,CAAaC,KAAzB;AACAd,IAAAA,UAAU,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAV;AACD,GAHD;;AAIA,QAAMC,kBAAkB,GAAIH,KAAD,IAAW;AACpCL,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAK,CAACC,MAAN,CAAaC,KAAzB;AACAZ,IAAAA,YAAY,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAZ;AACD,GAHD;;AAIA,QAAME,OAAO,GAAIJ,KAAD,IAAW;AACzBA,IAAAA,KAAK,CAACK,cAAN;AACA,UAAMC,IAAI,GAAG;AACXA,MAAAA,IAAI,EAAEnB,OADK;AAEXoB,MAAAA,MAAM,EAAElB;AAFG,KAAb;;AAIF,SAAI,IAAImB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACvB,OAAO,CAACwB,MAAtB,EAA6BD,CAAC,EAA9B,EAAiC;AAC/B,UAAGvB,OAAO,CAACuB,CAAD,CAAP,CAAWF,IAAX,KAAoBnB,OAAvB,EAA+B;AAC7B,cAAMuB,SAAS,GAAGzB,OAAO,CAACuB,CAAD,CAAzB;AACA,cAAMG,SAAS,GAAG,EAAC,GAAGD,SAAJ;AAAeH,UAAAA,MAAM,EAAGlB;AAAxB,SAAlB;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAYc,SAAZ;;AACA,YAAGE,MAAM,CAACC,OAAP,CAAgB,GAAE1B,OAAQ,wDAA1B,CAAH,EAAsF;AACpFN,UAAAA,aAAa,CACZiC,YADD,CACcJ,SAAS,CAACK,EADxB,EAC4BJ,SAD5B,EAECb,IAFD,CAEMkB,QAAQ,IAAI;AAChBrB,YAAAA,OAAO,CAACC,GAAR,CAAYoB,QAAZ;AACA9B,YAAAA,UAAU,CAACD,OAAO,CAACgC,GAAR,CAAYC,MAAM,IAAIA,MAAM,CAACH,EAAP,KAAcL,SAAS,CAACK,EAAxB,GAA6BG,MAA7B,GAAsCF,QAA5D,CAAD,CAAV;AACD,WALD,EAMCG,KAND,CAMO1B,KAAK,IAAI;AACdC,YAAAA,QAAQ;AACT,WARD;AASD;;AACD;AACD;;AACA,UAAGT,OAAO,CAACuB,CAAD,CAAP,CAAWD,MAAX,KAAsBlB,SAAzB,EAAmC;AAClC+B,QAAAA,KAAK,CAAE,GAAE/B,SAAU,iCAAd,CAAL;AACA;AACD;AAEF;;AAECM,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BI,KAAK,CAACC,MAApC;AAEApB,IAAAA,aAAa,CACZwC,MADD,CACQf,IADR,EAEGR,IAFH,CAEQwB,YAAY,IAAI;AACtBpC,MAAAA,UAAU,CAACD,OAAO,CAACsC,MAAR,CAAeD,YAAf,CAAD,CAAV;AACAlC,MAAAA,UAAU,CAAC,EAAD,CAAV;AACAE,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,MAAAA,QAAQ,CAAE,GAAE8B,YAAY,CAAChB,IAAK,oBAAtB,CAAR;AACAkB,MAAAA,UAAU,CAAC,MAAM;AACfhC,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAVD;AAYD,GA7CD;;AA8CA,QAAMiC,YAAY,GAAIzB,KAAD,IAAW;AAC7BnB,IAAAA,aAAa,CACZgB,MADD,GAECC,IAFD,CAEMb,OAAO,IAAI;AACjBC,MAAAA,UAAU,CAAED,OAAO,CAACyC,MAAR,CAAe,UAASR,MAAT,EAAiB;AACzC,eAAOA,MAAM,CAACZ,IAAP,CAAYqB,QAAZ,CAAqB3B,KAAK,CAACC,MAAN,CAAaC,KAAlC,KACAgB,MAAM,CAACX,MAAP,CAAcoB,QAAd,CAAuB3B,KAAK,CAACC,MAAN,CAAaC,KAApC,CADP;AAEF,OAHW,CAAF,CAAV;AAIA,KAPA;AAUF,GAXD;;AAYA,QAAM0B,YAAY,GAAGV,MAAM,IAAI;AAC7B,QAAGN,MAAM,CAACC,OAAP,CAAgB,UAASK,MAAM,CAACZ,IAAK,IAArC,CAAH,EAA6C;AAC7CzB,MAAAA,aAAa,CACZ+C,YADD,CACcV,MAAM,CAACH,EADrB,EAEEjB,IAFF,CAGGZ,UAAU,CAACD,OAAO,CAACyC,MAAR,CAAeG,CAAC,IAAIA,CAAC,CAACd,EAAF,KAASG,MAAM,CAACH,EAApC,CAAD,CAHb;AAMCvB,MAAAA,QAAQ,CAAE,GAAE0B,MAAM,CAACZ,IAAK,sBAAhB,CAAR;AACAkB,MAAAA,UAAU,CAAC,MAAM;AAChBhC,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,OAFU,EAER,IAFQ,CAAV;AAGA;AACF,GAbD;;AAiBA,sBACE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,YAAD;AAAc,MAAA,OAAO,EAAED;AAAvB;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE,QAAC,KAAD;AAAO,MAAA,OAAO,EAAEE;AAAhB;AAAA;AAAA;AAAA;AAAA,YAHF,eAIE,QAAC,MAAD;AAAQ,MAAA,YAAY,EAAEgC;AAAtB;AAAA;AAAA;AAAA;AAAA,YAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,eAME,QAAC,SAAD;AAAW,MAAA,OAAO,EAAEtC,OAApB;AAA6B,MAAA,SAAS,EAAEE,SAAxC;AAAmD,MAAA,gBAAgB,EAAEU,gBAArE;AAAuF,MAAA,kBAAkB,EAAEI,kBAA3G;AAA+H,MAAA,OAAO,EAAEC;AAAxI;AAAA;AAAA;AAAA;AAAA,YANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF,eAQE,QAAC,QAAD;AAAU,MAAA,OAAO,EAAEnB,OAAnB;AAA4B,MAAA,YAAY,EAAE2C;AAA1C;AAAA;AAAA;AAAA;AAAA,YARF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CAlHD;;GAAM5C,G;;KAAAA,G;AAoHN,eAAeA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport AllNames from './components/AllNames'\nimport Filter from './components/Filter'\nimport NewPerson from './components/NewPerson'\nimport personService from './services/personService'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [notif, setNotif] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n    .getAll()\n    .then(persons => {\n      setPersons(persons);\n    })\n   \n  }, [])\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const addName = (event) => {\n    event.preventDefault()\n    const name = {\n      name: newName,\n      number: newNumber,\n    }\n  for(let i=0;i<persons.length;i++){\n    if(persons[i].name === newName){\n      const personOld = persons[i];\n      const newPerson = {...personOld, number : newNumber}\n      console.log(personOld)\n      if(window.confirm(`${newName} already added. Replace the old number with a new one?`)){\n        personService\n        .updatePerson(personOld.id, newPerson)\n        .then(response => {\n          console.log(response)\n          setPersons(persons.map(person => person.id !== personOld.id ? person : response ))\n        })\n        .catch(error => {\n          setError()\n        })\n      }\n      return;\n    }\n     if(persons[i].number === newNumber){\n      alert(`${newNumber} already added to the phonebook`);\n      return;\n    }\n\n  }\n\n    console.log('button clicked', event.target)\n    \n    personService\n    .create(name)\n      .then(returnedName => {\n      setPersons(persons.concat(returnedName))\n      setNewName('')\n      setNewNumber('')\n      setNotif(`${returnedName.name} added succesfully`);\n      setTimeout(() => {\n        setNotif(null)\n      }, 5000)\n    })\n  \n  }\n  const handleSearch = (event) => {\n     personService\n     .getAll()\n     .then(persons => {\n     setPersons( persons.filter(function(person) {\n        return person.name.includes(event.target.value) ||\n               person.number.includes(event.target.value);\n     }))\n    })\n    \n   \n  }\n  const deletePerson = person => {\n    if(window.confirm(`Delete ${person.name} ?`)){\n    personService\n    .deletePerson(person.id)\n     .then(\n       setPersons(persons.filter(p => p.id !== person.id))\n       \n     )\n     setNotif(`${person.name} deleted succesfully`);\n     setTimeout(() => {\n      setNotif(null)\n    }, 5000)\n    }\n  }\n\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notif}/>\n      <Error message={error} />\n      <Filter handleSearch={handleSearch}/>\n      <h2>Add person</h2>\n      <NewPerson newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addName={addName} />\n      <h2>Numbers</h2>\n      <AllNames persons={persons} deletePerson={deletePerson}/>\n    </div>\n  )\n\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}